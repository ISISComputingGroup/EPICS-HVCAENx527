#
# Interlock Records for a channel of a
# CAEN HVx527 HV controller
#
record( ai, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:in")
{
	field( INP, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):vmon CPP")
	field( FLNK, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:test.PROC")
}
record( mbbo, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:cond")
{
	field( VAL, "0")
	field( ZRVL, "0")	field( ZRST, ">")
	field( ONVL, "1")	field( ONST, "=")
	field( TWVL, "2")	field( TWST, "<")
	field( THVL, "3")	field( THST, "!=")
	field( PINI, "1")
}
record( ao, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:thresh")
{
	field( VAL, "400")
	field( PINI, "1")
}
# The calc record only determines if conditions have been met.
# The fanout actually determines if a signal should be sent.
record( calc, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:test")
{
	field( INPA, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:in")
	field( INPB, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:thresh")
	field( INPJ, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:cond")
	field( CALC, "J=1&&A=B||J=2&&A<B||J=0&&A>B||J=3&&A#B")
	field( FLNK, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:act.PROC")
}
record( seq, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:act")
{
	field( SELL, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):ilock:test")
	field( SELM, "Specified")
	field( DOL1, "0")
	field( LNK1, "$(P):$(PSNAME):$(SLOT):$(CHANNUM):pwonoff PP")
}
